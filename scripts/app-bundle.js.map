{"version":3,"sources":["app.js","environment.js","main.js","lib/message-types.js","lib/string-utils.js","resources/index.js","containers/game-container/game-container.js","gateways/connection/connection-api.js","gateways/data/data-api.js","resources/attributes/key-return.js","resources/attributes/no-select.js","resources/attributes/take-focus.js","resources/elements/ui-wrappers/bs-row.js"],"names":["App","configureRouter","cfg","router","title","map","route","name","moduleId","debug","testing","gatewayRootURL","socketRootURL","configure","Promise","config","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","CONNECT_RESPONSE","SET_NICKNAME_RESPONSE","BROADCAST_WORD","TYPE_WORD_RESPONSE","TERMINATE_GAME","WORD_MISMATCH","ROUND_WON","ROUND_LOST","SET_NICKNAME","JOIN_GAME","TYPE_WORD","isEmpty","val","trim","globalResources","MessageTypes","GameContainer","Element","element","dataAPI","connectionAPI","attached","audioBank","victoryDing","Audio","lossDing","closeItem","loserPointDing","winnerPointDing","wordMismatch","joinGame","opponentFound","initStateModel","initDOMHooks","attachDOMListeners","connectToServer","detached","detachDOMListeners","isConnectingToServer","isSettingNickname","isWaitingForOpponent","isCheckingWord","showWinStatus","canJoinGame","canDisplayTutorial","sessionId","didWin","isNicknameSet","loadingText","currentScore","getVictoryBanner","querySelector","getScoreWrapper","getVictoryTextContainer","serverSocket","getGameSocketConnection","hookUpServerSocket","onopen","event","onclose","onmessage","data","JSON","parse","console","log","type","handleConnectResponse","handleSetNicknameResponse","handleBroadcastWord","handleTypeWordResponse","handleTerminateGame","isInGame","playAudio","currentWord","word","currentOpponent","opponentNickname","hasNotSentWord","gameMessageType","handleWordMismatch","handleRoundWon","handleRoundLost","typedWord","victoryBanner","classList","remove","setTimeout","transferPoints","playerScore","add","points","victory","scoreWrapper","victoryTextContainer","$scoreWrapper","$","$victoryTextContainer","startTop","offset","top","startLeft","left","starIcon","document","createElement","css","style","moveStar","color","amount","$starIcon","cloneNode","Object","assign","opacity","position","appendTo","animate","effect","times","i","transfers","handleSetNicknameClick","setNickname","handleJoinGameClick","handleWordSubmit","canSubmitWord","sendWord","nickname","currentNickname","message","constructMessage","sendToServer","sendMessage","slice","audioNode","play","socket","send","stringify","content","ConnectionAPI","WebSocket","DataAPI","client","withBaseUrl","getScoreRequest","createRequest","asGet","KeyReturn","enterPressed","key","e","which","keyCode","value","addEventListener","removeEventListener","NoSelect","cursor","focus","DEFAULT_SIZE","BsRow"],"mappings":"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","file":"app-bundle.js","sourcesContent":["export class App {\n  constructor() { }\n\n  configureRouter(cfg, router) {\n    this.router = router;\n    cfg.title = 'Typerace';\n\n    cfg.map([\n      {\n        route: '',\n        name: 'game',\n        moduleId: 'containers/game-container/game-container'\n      }\n    ]);\n  }\n}\n","export default {\n  debug: true,\n  testing: true,\n  gatewayRootURL: 'https://localhost:8081',\n  socketRootURL: 'ws://localhost:8081'\n};\n","import environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","/* server messages */\r\n/* server events */\r\nexport const CONNECT_RESPONSE = 'CONNECT_RESPONSE';\r\nexport const SET_NICKNAME_RESPONSE = 'SET_NICKNAME_RESPONSE';\r\nexport const BROADCAST_WORD = 'BROADCAST_WORD';\r\nexport const TYPE_WORD_RESPONSE = 'TYPE_WORD_RESPONSE';\r\nexport const TERMINATE_GAME = 'TERMINATE_GAME';\r\n/* game events */\r\nexport const WORD_MISMATCH = 'WORD_MISMATCH';\r\nexport const ROUND_WON = 'ROUND_WON';\r\nexport const ROUND_LOST = 'ROUND_LOST';\r\n\r\n/* client messages */\r\nexport const SET_NICKNAME = 'SET_NICKNAME';\r\nexport const JOIN_GAME = 'JOIN_GAME';\r\nexport const TYPE_WORD = 'TYPE_WORD';\r\n","export function isEmpty(val) {\r\n  return !val || !val.trim();\r\n}\r\n","export function configure(config) {\n  config.globalResources([\n    './attributes/key-return',\n    './attributes/take-focus',\n    './attributes/no-select',\n    './elements/ui-wrappers/bs-row'\n  ]);\n}\n","import { inject, bindable } from 'aurelia-framework';\r\n\r\nimport 'jquery';\r\nimport 'jquery-ui-dist';\r\n\r\nimport { DataAPI } from '../../gateways/data/data-api';\r\nimport { ConnectionAPI } from '../../gateways/connection/connection-api';\r\n\r\nimport { isEmpty } from '../../lib/string-utils';\r\nimport * as MessageTypes from '../../lib/message-types';\r\n\r\n@inject(Element, DataAPI, ConnectionAPI)\r\nexport class GameContainer {\r\n  @bindable currentNickname = '';\r\n  @bindable word = '';\r\n\r\n  constructor(element, dataAPI, connectionAPI) {\r\n    this.element = element;\r\n    this.dataAPI = dataAPI;\r\n    this.connectionAPI = connectionAPI;\r\n  }\r\n\r\n  attached() {\r\n    this.audioBank = {\r\n      victoryDing: new Audio('media/audio/victory-ding.ogg'),\r\n      lossDing: new Audio('media/audio/loss-ding.ogg'),\r\n      closeItem: new Audio('media/audio/close-item.ogg'),\r\n      loserPointDing: new Audio('media/audio/loser-point-ding.ogg'),\r\n      winnerPointDing: new Audio('media/audio/winner-point-ding.ogg'),\r\n      wordMismatch: new Audio('media/audio/word-mismatch.ogg'),\r\n      joinGame: new Audio('media/audio/join-game.ogg'),\r\n      opponentFound: new Audio('media/audio/opponent-found.ogg')\r\n    };\r\n\r\n    this.initStateModel();\r\n    this.initDOMHooks();\r\n    this.attachDOMListeners();\r\n\r\n    this.connectToServer();\r\n  }\r\n\r\n  detached() {\r\n    this.detachDOMListeners();\r\n  }\r\n\r\n  /* INITIALIZERS */\r\n  initStateModel() {\r\n    this.isConnectingToServer = false;\r\n    this.isSettingNickname = false;\r\n    this.isWaitingForOpponent = false;\r\n    this.isCheckingWord = false;\r\n\r\n    this.showWinStatus = false;\r\n    this.canJoinGame = false;\r\n    this.canDisplayTutorial = false;\r\n\r\n    this.sessionId = null;\r\n    this.didWin = null;\r\n    this.isNicknameSet = false;\r\n    this.loadingText = null;\r\n    this.currentScore = 0;\r\n  }\r\n\r\n  initDOMHooks() {\r\n    this.getVictoryBanner = () => (this.element.querySelector('#victory-banner'));\r\n    this.getScoreWrapper = () => (this.element.querySelector('#score-wrapper'));\r\n    this.getVictoryTextContainer = () => (this.element.querySelector('#victory-text-container'));\r\n  }\r\n\r\n  attachDOMListeners() {\r\n\r\n  }\r\n\r\n  detachDOMListeners() {\r\n\r\n  }\r\n\r\n  connectToServer() {\r\n    const serverSocket = this.serverSocket = this.connectionAPI.getGameSocketConnection();\r\n    this.hookUpServerSocket(serverSocket);\r\n  }\r\n\r\n  hookUpServerSocket(serverSocket) {\r\n    this.isConnectingToServer = true;\r\n    this.loadingText = 'Connecting to server...';\r\n    serverSocket.onopen = (event) => {\r\n      this.isConnectingToServer = false;\r\n    };\r\n\r\n    serverSocket.onclose = (event) => {\r\n      // TODO\r\n    };\r\n\r\n    serverSocket.onmessage = (event) => {\r\n      const data = JSON.parse(event.data);\r\n      console.log(data);\r\n      switch (data.type) {\r\n      case MessageTypes.CONNECT_RESPONSE:\r\n        this.handleConnectResponse(data);\r\n        break;\r\n      case MessageTypes.SET_NICKNAME_RESPONSE:\r\n        this.handleSetNicknameResponse(data);\r\n        break;\r\n      case MessageTypes.BROADCAST_WORD:\r\n        this.handleBroadcastWord(data);\r\n        break;\r\n      case MessageTypes.TYPE_WORD_RESPONSE:\r\n        this.handleTypeWordResponse(data);\r\n        break;\r\n      case MessageTypes.TERMINATE_GAME:\r\n        this.handleTerminateGame(data);\r\n        break;\r\n      default:\r\n        break;\r\n      }\r\n    };\r\n  }\r\n  /* /INITIALIZERS */\r\n\r\n  /* SERVER MESSAGE HANDLERS */\r\n  handleConnectResponse(data) {\r\n    this.sessionId = data.sessionId;\r\n  }\r\n\r\n  handleSetNicknameResponse(data) {\r\n    this.isSettingNickname = false;\r\n    this.isNicknameSet = true;\r\n\r\n    this.canDisplayTutorial = true;\r\n    this.canJoinGame = true;\r\n    this.isInGame = false;\r\n  }\r\n\r\n  handleBroadcastWord(data) {\r\n    playAudio(this.audioBank.opponentFound);\r\n\r\n    this.isWaitingForOpponent = false;\r\n    this.currentWord = data.word;\r\n    this.currentOpponent = data.opponentNickname;\r\n    this.isInGame = true;\r\n    this.hasNotSentWord = true;\r\n  }\r\n\r\n  handleTypeWordResponse(data) {\r\n    this.isCheckingWord = false;\r\n    switch (data.gameMessageType) {\r\n    case MessageTypes.WORD_MISMATCH:\r\n      this.handleWordMismatch();\r\n      break;\r\n    case MessageTypes.ROUND_WON:\r\n      this.handleRoundWon(data);\r\n      break;\r\n    case MessageTypes.ROUND_LOST:\r\n      this.handleRoundLost(data);\r\n      break;\r\n    default:\r\n      break;\r\n    }\r\n  }\r\n\r\n  handleWordMismatch() {\r\n    playAudio(this.audioBank.wordMismatch);\r\n  }\r\n\r\n  handleRoundWon(data) {\r\n    playAudio(this.audioBank.victoryDing);\r\n    this.showWinStatus = true;\r\n    this.didWin = true;\r\n    this.typedWord = '';\r\n\r\n    const victoryBanner = this.getVictoryBanner();\r\n    victoryBanner.classList.remove('fadeOut');\r\n\r\n    setTimeout(() => this.transferPoints(data.playerScore, true), 500);\r\n\r\n    setTimeout(() => {\r\n      victoryBanner.classList.add('fadeOut');\r\n      setTimeout(() => {\r\n        this.showWinStatus = false;\r\n        this.didWin = null;\r\n      }, 500);\r\n    }, 1000);\r\n  }\r\n\r\n  handleRoundLost(data) {\r\n    playAudio(this.audioBank.lossDing);\r\n    this.showWinStatus = true;\r\n    this.didWin = false;\r\n    this.typedWord = '';\r\n\r\n    const victoryBanner = this.getVictoryBanner();\r\n    victoryBanner.classList.remove('fadeOut');\r\n\r\n    setTimeout(() => this.transferPoints(data.playerScore, false), 500);\r\n\r\n    setTimeout(() => {\r\n      victoryBanner.classList.add('fadeOut');\r\n      setTimeout(() => {\r\n        this.showWinStatus = false;\r\n        this.didWin = null;\r\n      }, 500);\r\n    }, 1000);\r\n  }\r\n\r\n  transferPoints(points, victory) {\r\n    const scoreWrapper = this.getScoreWrapper();\r\n    const victoryTextContainer = this.getVictoryTextContainer();\r\n\r\n    const $scoreWrapper = $(scoreWrapper);\r\n    const $victoryTextContainer = $(victoryTextContainer);\r\n\r\n    const startTop = $victoryTextContainer.offset().top + 20;\r\n    const startLeft = $victoryTextContainer.offset().left + 85;\r\n    const starIcon = document.createElement('i');\r\n    starIcon.classList.add('fa');\r\n    starIcon.classList.add('fa-star');\r\n    const css =  {\r\n      'font-size': '24px'\r\n    };\r\n    starIcon.style = css;\r\n\r\n    const moveStar = (color, amount) => {\r\n      const $starIcon = $(starIcon.cloneNode());\r\n      $starIcon\r\n        .offset({\r\n          top: startTop,\r\n          left: startLeft\r\n        })\r\n        .css(Object.assign({\r\n          opacity: '0.5',\r\n          color,\r\n          position: 'absolute',\r\n          'z-index': '100'\r\n        }, css))\r\n        .appendTo($('body'))\r\n        .animate({\r\n          'top': $scoreWrapper.offset().top,\r\n          'left': $scoreWrapper.offset().left\r\n        }, 500, 'easeInOutExpo', () => {\r\n          if (victory) {\r\n            playAudio(this.audioBank.winnerPointDing);\r\n          } else {\r\n            playAudio(this.audioBank.loserPointDing);\r\n          }\r\n\r\n          $scoreWrapper.effect('shake', { times: victory ? 2 : 1 }, 100);\r\n          $starIcon.remove();\r\n          this.currentScore += amount;\r\n        });\r\n    };\r\n\r\n    let i = 1;\r\n    let color;\r\n    let transfers;\r\n    let amount;\r\n    if (victory) {\r\n      color = 'gold';\r\n      amount = 10;\r\n      transfers = points / 10;\r\n    } else {\r\n      // bronze\r\n      color = '#CD7F32';\r\n      amount = 1;\r\n      transfers = points;\r\n    }\r\n\r\n    while (transfers-- > 0) {\r\n      setTimeout(() => moveStar(color, amount), 150 * i++);\r\n    }\r\n  }\r\n  /* /SERVER MESSAGE HANDLERS */\r\n\r\n  /* USER INTERACTION HANDLERS */\r\n  handleTerminateGame(data) {\r\n    // TODO\r\n  }\r\n\r\n  handleSetNicknameClick() {\r\n    playAudio(this.audioBank.closeItem);\r\n    this.setNickname();\r\n  }\r\n\r\n  handleJoinGameClick() {\r\n    playAudio(this.audioBank.joinGame);\r\n    this.joinGame();\r\n  }\r\n\r\n  handleWordSubmit() {\r\n    if (this.canSubmitWord) {\r\n      this.sendWord();\r\n    }\r\n  }\r\n  /* /USER INTERACTION HANDLERS */\r\n\r\n  /* APP LOGIC */\r\n  setNickname() {\r\n    this.loadingText = 'Setting nickname...';\r\n    this.isSettingNickname = true;\r\n    const nickname = this.currentNickname;\r\n    const message = constructMessage(MessageTypes.SET_NICKNAME, { nickname });\r\n    this.sendToServer(message);\r\n  }\r\n\r\n  joinGame() {\r\n    this.loadingText = 'Waiting for an opponent...';\r\n    this.isWaitingForOpponent = true;\r\n    this.canDisplayTutorial = false;\r\n    this.canJoinGame = false;\r\n    const message = constructMessage(MessageTypes.JOIN_GAME);\r\n    this.sendToServer(message);\r\n  }\r\n\r\n  sendWord() {\r\n    this.isCheckingWord = true;\r\n    const message = constructMessage(MessageTypes.TYPE_WORD, { word: this.typedWord });\r\n    this.sendToServer(message);\r\n  }\r\n  /* /APP LOGIC */\r\n\r\n  /* VISIBLITY LOGIC */\r\n  get showLoadingBanner() {\r\n    return this.isConnectingToServer || !this.sessionId || this.isSettingNickname || this.isWaitingForOpponent;\r\n  }\r\n\r\n  get showNicknameForm() {\r\n    return !this.isConnectingToServer && !this.isNicknameSet;\r\n  }\r\n\r\n  get canSetNickname() {\r\n    return !isEmpty(this.currentNickname);\r\n  }\r\n\r\n  get showTutorial() {\r\n    return this.canDisplayTutorial;\r\n  }\r\n\r\n  get showJoinGameForm() {\r\n    return this.canJoinGame;\r\n  }\r\n\r\n  get showGameArea() {\r\n    return this.isInGame;\r\n  }\r\n\r\n  get showCurrentScore() {\r\n    return this.isInGame;\r\n  }\r\n  /* /VISIBLITY LOGIC */\r\n\r\n  /* DISPLAY FORMAT LOGIC */\r\n  get currentScoreString() {\r\n    return ('000' + this.currentScore).slice(-4);\r\n  }\r\n  /* /DISPLAY FORMAT LOGIC */\r\n\r\n  /* GATEWAY LOGIC */\r\n  get canSubmitWord() {\r\n    return !isEmpty(this.typedWord);\r\n  }\r\n\r\n  get isWordInputDisabled() {\r\n    return this.isCheckingWord;\r\n  }\r\n  /* /GATEWAY LOGIC /\r\n\r\n  /* SHARED UTILS */\r\n  sendToServer(message) {\r\n    sendMessage(this.serverSocket, message);\r\n  }\r\n  /* /SHARED UTILS */\r\n}\r\n\r\nconst playAudio = (audioNode) => {\r\n  audioNode.cloneNode().play();\r\n};\r\n\r\nconst sendMessage = (socket, message) => {\r\n  socket.send(JSON.stringify(message));\r\n};\r\n\r\nconst constructMessage = (type, content = {}) => {\r\n  return {\r\n    type,\r\n    ...content\r\n  };\r\n};\r\n","import environment from '../../environment';\r\n\r\nexport class ConnectionAPI {\r\n  constructor() {\r\n    this.socketRootURL = environment.socketRootURL;\r\n  }\r\n\r\n  getGameSocketConnection() {\r\n    return new WebSocket(`${this.socketRootURL}/game`);\r\n  }\r\n}\r\n","import { inject } from 'aurelia-framework';\r\nimport { HttpClient } from 'aurelia-http-client';\r\nimport environment from '../../environment';\r\n\r\n@inject(HttpClient)\r\nexport class DataAPI {\r\n  constructor(client) {\r\n    this.client = client.configure(cfg => cfg\r\n      .withBaseUrl(environment.gatewayRootURL)\r\n    );\r\n  }\r\n\r\n  getScoreRequest(sessionId) {\r\n    return this.client\r\n      .createRequest(`/scores/${sessionId}`)\r\n      .asGet();\r\n  }\r\n}\r\n","import { customAttribute, inject } from 'aurelia-framework';\r\n\r\n@customAttribute('key-return')\r\n@inject(Element)\r\nexport class KeyReturn {\r\n  enterPressed = () => {};\r\n\r\n  constructor(element) {\r\n    this.element = element;\r\n\r\n    this.enterPressed = e => {\r\n      let key = e.which || e.keyCode;\r\n      if (key === 13) {\r\n        this.value();\r\n      }\r\n    };\r\n  }\r\n\r\n  attached() {\r\n    this.element.addEventListener('keypress', this.enterPressed);\r\n  }\r\n\r\n  detached() {\r\n    this.element.removeEventListener('keypress', this.enterPressed);\r\n  }\r\n}\r\n","import { customAttribute, inject } from 'aurelia-framework';\r\n\r\n@customAttribute('no-select')\r\n@inject(Element)\r\nexport class NoSelect {\r\n  constructor(element) {\r\n    this.element = element;\r\n  }\r\n\r\n  attached() {\r\n    const element = this.element;\r\n    if (!element.style) {\r\n      element.style = {};\r\n    }\r\n\r\n    element.style['user-select'] = 'none';\r\n    element.style['-webkit-user-select'] = 'none';\r\n    element.style['-moz-user-select'] = 'none';\r\n    element.style['-ms-user-select'] = 'none';\r\n    element.style.cursor = 'default';\r\n  }\r\n}\r\n","import { customAttribute, inject } from 'aurelia-framework';\r\n\r\n@customAttribute('take-focus')\r\n@inject(Element)\r\nexport class KeyReturn {\r\n  constructor(element) {\r\n    this.element = element;\r\n  }\r\n\r\n  attached() {\r\n    this.element.focus();\r\n  }\r\n}\r\n","import { bindable, containerless } from 'aurelia-framework';\r\n\r\nconst DEFAULT_SIZE = 12;\r\n\r\n/* Bootstrap row wrapper */\r\n@containerless\r\nexport class BsRow {\r\n  @bindable lg = DEFAULT_SIZE;\r\n  @bindable md = DEFAULT_SIZE;\r\n  @bindable sm = DEFAULT_SIZE;\r\n  @bindable xs = DEFAULT_SIZE;\r\n\r\n  attached() {}\r\n}\r\n"],"sourceRoot":".."}